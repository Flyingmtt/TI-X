# 腾讯云工业AI训练平台培训文档

{{TOC}}

## 系统简介
AI训练系统分为概览页、用户管理、主数据管理、数据集管理、模型库和在线评估六大模块，集数据处理、模型训练、评估、预测于一体，提供模型训练的全流程AI能力。

- 概览页

概览页展示了当前系统的主要业务KPI指标和系统资源使用状况，用户可以通过概览页直观感受系统的运行情况。

- 用户管理

用户管理定义了不同角色对本系统的使用权限，超级管理员有使用用户管理模块的权限。

- 主数据管理

主数据管理模块是系统基本参数的配置模块，超级管理员可以针对性地结合产品的使用场景进行基本参数的配置，本产品可配置的系统主数据包括行业主数据、生产环境主数据、任务类型主数据和计算资源主数据。

- 数据集管理

数据集管理模块集中管理训练数据集和题库数据集，一个数据集由数据集名称、数据集绑定的生产环境信息和该数据集下绑定的数据路径组成。数据集管理模块由训练数据集和题库数据集两部分组成。

- 模型镜像管理

模型镜像管理模块维护了系统所有的模型镜像。镜像类型有两种：通用类镜像和业务类镜像。

- 模型库

模型库是系统全部模型的管理中心，包括已经完成发布的模型集合与正在训练的任务集合。用户可以在模型库进行模型训练和管理。

- 在线评估

在线评估模块由题库预测与模型对比两个部分组成，用户可以对训练完成的模型进行预测评估，查看其性能指标。针对模型的多个版本，可以进行预测评估的性能指标比对。

AI训练平台安装部署完成后，在开始使用前，用户（超级管理员）需要在主数据管理模块根据本企业的实际情况进行行业、生产环境、任务类型和计算资源组的配置，配置完成后可开始进行模型训练和评估功能的使用。

## 系统功能详细说明
### 用户管理
#### 1. 概述
本产品版本提供两种用户角色：超级管理员和模型训练员，分别拥有不同的产品模块使用权限和管理权限。下表是超级管理员与模型训练员对产品各个模块管控权限的说明：

| 产品模块 | 超级管理员 | 模型训练员 |
| ------ | ------ | ------ |
| 用户管理 | 1. 管理包括自己在内的所有用户，可以修改密码，邮箱，用户角色；<br>2. 可创建用户；<br>3.**可删除除了本用户外**的其他所有用户； | 管理本用户，包括修改自己的邮箱和密码 |
| 主数据管理 | 可管理所有主数据，包括主数据编辑、修改、增加和删除等操作| 不能管理主数据 |
| 数据集管理 | 1. 查看所有用户创建的数据集；<br>2. 删除任意用户创建的数据集；<br>3. 管理任意用户创建的数据集的数据路径，包括新增、修改和删除等 | 1. 查看所有用户创建的数据集；<br>2. 删除任意用户创建的数据集；<br>3. 管理任意用户创建的数据集的数据路径，包括新增、修改和删除等 |
| 系统概览 |查看本用户相关的KPI指标，包括当前用户的模型数量、模型最低精度、训练任务和评估任务数量和异常任务数量等 | 查看本用户相关的KPI指标，包括当前用户的模型数量、模型最低精度、训练任务和评估任务数量和异常任务数量等|
| 模型管理 | 1. 管理本用户创建的模型；<br>2. 新建模型时可以访问并绑定所有用户创建的模型镜像；<br>3. 可以访问并导入所有用户创建的训练数据集中的路径 | 1. 管理本用户创建的模型；<br>2. 新建模型时可以访问并绑定所有用户创建的模型镜像；<br>3. 可以访问并导入所有用户创建的训练数据集中的路径  |
| 模型训练 | 可以管理本用户创建的训练任务；| 可以管理本用户创建的训练任务； |
| 模型镜像管理 | 管理所有用户创建的模型镜像，包括删除、新增版本； | 管理所有用户创建的模型镜像，包括删除、新增版本；  |
| 在线评估 | 1. 选择本用户创建的模型进行在线评估；<br>2. 访问并导入所有用户创建的题库数据集中的路径 | 1. 选择本用户创建的模型进行在线评估；<br>2. 访问并导入所有用户创建的题库数据集中的路径 |

#### 2. 超级管理员
超级管理员登录界面可以看到用户管理页面，如图1.1，列表展示了当前系统所有的用户详情，包括全部超级管理员与模型训练员。
![avatar](/pics/用户管理.png)
##### 2.1 新建用户
点击【新建】按钮，可以开始新建一个新的系统用户，新建用户界面如图1.2。
![avatar](/pics/新建角色.png)
输入信息：

- 用户名（必填）：字符长度不能小于5，用户名只能使用数字,中英文字母或下划线
- 密码（必填）：字符长度不能小于6，密码至少包括大小写字母、数字中的两种
- 用户角色（必选）：超级管理员或模型训练员，两者选一
- 邮箱（选填）：填写用户邮箱地址
- 备注（选填）：任意备注信息

新建完成后，点击【完成】即可跳转至用户列表，且可以在列表首行查看到新建的用户。
##### 2.2 删除用户
点击列表中的【删除】按钮，即可删除一个用户。
##### 2.3 修改用户信息
超级管理员可以修改任意一个用户的信息，包括邮箱和密码。当鼠标置于任一用户的邮箱信息之上时，鼠标会成为手型，点击邮箱信息，即可在弹出的修改对话框里进行邮箱信息的修改。点击任一用户项的【重置密码】，即可弹出修改密码对话框进行密码重置。
> 注：为了避免不必要的麻烦，请不要随意修改用户的信息；修改用户信息请确保知会到用户本人

##### 2.4 修改当前账号信息
超级管理员与模型训练员一致，修改当前登录账号的信息需要点击右上方角色头像，并点击【管理账户信息】进行用户信息的修改，密码修改后会自动登出系统，此时需要使用新的用户名和密码进行登录。

![avatar](/pics/管理账户信息.png)
#### 3. 模型训练员
模型训练员角色账号登录以后，无法查看用户管理界面，不可执行用户管理的操作。模型训练员修改当前账号信息与超级管理员操作一致，通过点击右上方角色头像的【管理账户信息】进入修改页面完成信息修改，密码修改后会自动登出系统，此时需要使用新的用户名和密码进行登录。
### 主数据管理
#### 1. 概述
主数据管理模块是系统基本参数的配置模块，超级管理员可以针对性地结合产品的使用场景进行基本参数的配置，本产品可配置的系统主数据包括行业主数据、生产环境主数据、任务类型主数据和计算资源主数据。
#### 2. 行业主数据管理
行业主数据管理模块维护了产品适用的行业信息，图1.3是行业主数据列表，管理员可以在此模块进行行业主数据的新增、生产环境层级管理和删除操作。点击行业下拉框，可查看当前行业维护的生产环境层级信息。
![avatar](/pics/行业主数据.png)
##### 2.1 新增行业
点击列表上方【新建行业】按钮，可弹出行业新建的对话框，输入信息：

- 行业名称：最长60个字符，可以使用中英文字符、数据和下划线
![avatar](/pics/新建行业.png)

点击【完成】，返回行业主数据列表，可以看到列表新增。点击【设为默认】，可将当前行业设为系统默认行业，后续的生产环境配置信息与默认行业关联。
##### 2.2 添加生产环境层级
针对新建的行业，管理员可以为其添加生产环境层级。
> 生产环境层级维护了当前行业下所有的生产环境层级名称，这里维护的生产环境层级与生产环境主数据模块相互对应）

![avatar](/pics/添加生产环境层级.png)
点击列表中的【添加生产环境层级】按钮，弹出层级添加对话框。

输入信息：

- 各生产环境层级名称
> 1. 生产环境层级最多可以维护10层
> 2. 在添加层级时，只允许从最后一级层级开始删除，不可直接删除中间层级

如上图所示，对于当前行业，可以通过点击【添加层级】，维护多级生产环境。对于已经维护好层级的行业，通过点击【添加生产环境层级】，可在弹出的对话框中对行业层级名称进行修改。
![avatar](/pics/修改层级名称.png)
> 修改行业层级只允许修改行业层级的名称，不可删除层级。

#### 3. 生产环境主数据
生产环境主数据维护了默认行业的生产环境信息。下图是默认行业的生产环境主数据详细信息。用户可以在此模块进行不同生产环境数据的配置，生产环境层级信息按树状展开，用户可以对层级结构一目了然。
![avatar](/pics/生产环境主数据.png)
下面以工厂（一级）、厂别（二级）、站点（三级）、产品（四级）这四个层级为例，展示如何通过配置操作实现对生产环境主数据的管理。
##### 3.1 配置厂区
- **添加厂区**

单击生产环境配置模块上方的【新建工厂】按钮，开始新建一级层级“工厂”，在弹窗中的输入框里通过换行输入不同工厂名称可同时配置多个工厂，如图所示。
![avatar](/pics/添加工厂.png)

- **删除厂区**

将鼠标移至某一厂区名称所在行，点击【删除】按钮，即可将该厂区进行删除。
![avatar](/pics/删除厂区.png)
> 删除厂区会将其附带所有层级信息全部删除，请慎重操作。

##### 3.2 配置厂别
- **添加厂别**

将鼠标移至某一厂区名称所在行，点击【添加厂别】，即可对该一级层级“厂区”配置二级层级“厂别”信息。与新建工厂类似，在弹窗中的输入框里通过换行输入不同厂别名称可同时配置多个厂别。

- **删除厂别**

将鼠标移至某一厂别名称所在行，点击【删除】按钮，即可将该厂别进行删除。
> 删除厂别会将其附带所有层级信息全部删除，请慎重操作。

##### 3.3 配置站点
- **添加站点**

将鼠标移至某一厂别名称所在行，点击【添加站点】，即可对该二级层级“厂别”配置三级层级“站点”信息。与新建工厂类似，在弹窗中的输入框里通过换行输入不同站点名称可同时配置多个站点。

- **‌删除站点**

将鼠标移至某一站点名称所在行，点击【删除】按钮，即可将该站点进行删除。
> 删除站点会将其附带所有层级信息全部删除，请慎重操作。

##### 3.4 配置产品
- **添加产品**

将鼠标移至某一站点你名称所在行，点击【添加产品】，即可对该三级层级“站点”配置四级层级“产品”信息。与新建工厂类似，在弹窗中的输入框里通过换行输入不同产品名称可同时配置多个产品。

- **批量添加产品**

-将鼠标移至某一厂别名称所在行，点击【批量添加站点】，在弹窗中可以同时选择该厂别下的多个站点，并对所有选中的站点配置产品信息。

- **‌删除产品**

将鼠标移至某一产品名称所在行，点击【移除产品】按钮，即可将该产品进行删除。
将鼠标移至某一站点名称所在行，点击【移除产品】按钮，可在弹窗中选择多个产品进行批量删除操作。
#### 4. 任务类型主数据
任务类型主数据维护了系统可以选择的模型的任务类型信息。用户可以直接在此模块进配置。
![avatar](/pics/任务类型.png)

- **‌新建任务类型**

点击列表的【新建任务类型】按钮，可以配置不同的任务类型，用户需要自行输入任务类型名称。

- **‌删除任务类型**

点击列表的【删除】按钮，可以将该任务类型删除。

- **‌任务类型重命名**

点击列表的【重命名】按钮，可重新命名该任务类型。
#### 5. 计算资源主数据
计算资源主数据维护了模型训练时可以选择的计算资源配置信息。计算资源配置包括通用型和GPU型两大类，通用型包括CPU核和内存的配置；GPU型包括CPU核、内存、GPU卡数、显存的配置。
![avatar](/pics/计算资源主数据.png)

- **‌新建计算资源配置**

通过点击【新建计算资源按钮】，可以新建通用型和GPU型的计算资源配置。

- **‌删除计算资源配置**

点击【删除】，即可删除当前所在行的计算资源配置。

- **‌修改计算资源配置**

点击【更改配置】，即可对当前所在行的计算资源配置进行修改，修改后立即生效。
### 数据集管理
#### 1. 概述
数据集管理模块集中管理训练数据集和题库数据集，一个数据集由数据集名称、数据集绑定的生产环境信息和该数据集下绑定的数据路径组成。数据集管理模块由训练数据集和题库数据集两部分组成。训练数据集为模型训练时所需的数据集，题库数据集为在线评估时所需的测试数据集。训练数据集和题库数据集的操作和管理方式一致，下面以训练数据集模块为例，详细介绍数据集管理模块的操作方法。
#### 2. 导入数据集
点击页面上方【新建数据集】，开始导入数据集操作。
![avatar](/pics/新建数据集.png)
输入信息：

- 数据集名称：最长60个字符，字母开头，支持 a-z，A-Z，0-9，-，_，且需要以数字或字母结尾。
- 生产环境信息：选择该数据集所适用的生产环境信息，其中工厂、厂别和站点信息筛选框为单选操作，产品信息筛选框为多选，即一个数据集可适用于多个产品。
- 数据集路径：一个数据集维护了多个code文件夹路径，在数据集路径列表中，单击下方【添加数据路径】可以增加数据路径输入框，在数据框里输入数据路径，点击【添加数据路径】，自动对上一条输入的路径信息进行校验：若路径有效，则自动带出该条路径下的图片数量和文件描述信息；若路径无效，系统会给出“校验数据集路径失败：路径有误”的提示信息，且该路径下显示的路径为空。
> 请在添加数据路径时输入有效的数据路径以保证数据集的质量。

数据集信息输入完毕以后点击【完成】，可以在数据集列表里查看到新建的数据集。
#### 3. 数据集管理
数据集列表页面展示了系统所有用户维护的数据集，其中每条数据集记录包含了数据集名称、路径数、图片数量、修改人、修改时间和相关操作链接。单击数据集下拉按钮，可以查看当前数据集所属的生产环境信息。
![avatar](/pics/数据集列表.png)
##### 3.1 管理数据集路径
单击管理数据路径，跳转至数据集路径管理页面。
![avatar](/pics/管理数据路径.png)

- **添加路径**
单击【添加】按钮，可以批量添加当前数据集的数据路径，添加路径时依旧会对路径进行有效性校验。
- **移除路径**
用户可以通过点击任一一条数据路径右方的【删除】按钮进行路径的逐个删除，也可以通过复选框勾选多条数据路径，并且单击【移除】按钮进行数据路径的批量移除。

##### 3.2 筛选数据集
数据集列表上方有生产环境层级的筛选框：工厂、厂别、站点、产品，这四个筛选过滤框为级联关系，用户可以通过依次选择想要筛查的数据集所属的工厂、厂别、站点和产品来筛选出符合条件的数据集。
##### 3.3 删除数据集
单击数据集列表中任一数据集右方的【删除】按钮，即可删除整个数据集。

### 模型镜像管理
模型镜像管理模块维护了系统所有的模型镜像。镜像类型有两种：通用类镜像和业务类镜像。其中通用类型镜像可适用于多个生产环境场景，没有特定的业务信息绑定；业务类型镜像是指对某种特定生产环境专门制作的镜像，绑定了产品层级的业务信息。每一个镜像组都有不同版本的镜像组成，同一镜像组对应于相同的镜像名称和生产环境信息。
#### 1. 导入镜像
点击页面上方【导入】按钮，开始导入模型镜像操作。
![avatar](/pics/导入镜像.png)

输入信息：

- 镜像类型：选择镜像类型：通用类型镜像或业务类型镜像

- 任务类型：选择任务类型，任务类型选项在“任务类型主数据”里维护。
- 生产环境选择：若选择业务类型镜像，需要在导入里绑定生产环境，其中工厂、厂别和站点信息筛选框为单选操作，产品信息筛选框为多选，即一个数据集可适用于多个产品。
![avatar](/pics/导入业务镜像.png)

- 镜像文件上传：

第一步：选择上传方式。镜像文件通过两种方式上传。第一种是通过本地文件上传；第二种可以通过输入远程服务器路径进行上传。请确保输入路径下已存在有效的模型镜像文件。

第二步：等待镜像上传。镜像文件一般比较大，导入过程分为两步：第一步为镜像上传过程，当选择上传文件或者输入远程路径以后，镜像开始上传，等到上传进度条显示为100%，单击【立即导入】，返回镜像列表。

第三步：等待镜像加载。镜像导入以后还需要等待一段时间进行后台加载，该状态可在镜像列表的下拉菜单项里进行查看。当加载状态显示为“成功”时，镜像导入成功；加载状态显示为“失败”时，镜像导入失败。
![avatar](/pics/镜像加载.png)


> 导入模型镜像命名要求：<模型镜像名称>@<模型镜像版本>(例如：image@123)，其中，name 和 tag 允许的字符集为 [a-zA-Z0-9._-]

> 导入模型镜像版本说明：首次导入成功的镜像版本默认为v1.0。

**镜像上传异常情况说明：**

1. 远程路径导入时，如果无法找到对应路径，系统则会返回错误消息”当前路径下无法找到有效的模型镜像文件”；
2. 如导入的镜像文件名称不满足模型镜像命名要求，则返回错误消息”模型镜像文件名称不满足格式要求”；
3. 若导入的模型镜像的<模型镜像名称>已在列表中存在，返回错误消息”模型镜像已存在，请从新增版本入口追加新版本”，此时需要通过新增版本进行镜像的导入。

#### 2. 镜像管理
用户可以对已经上传成功的镜像进行新增版本、删除、导出镜像和查看详情的操作。单击镜像列表的下拉框，可显示该镜像的不同镜像版本。
![avatar](/pics/镜像管理.png)
##### 2.1 新增镜像版本
单击【新增版本】，可进行镜像版本的新增，新增镜像版本继承该镜像前一版本的名称和生产环境信息，每成功导入一个镜像文件，版本号默认加1。

##### 2.2 删除镜像
单击某一镜像版本的【删除】按钮，可彻底删除该镜像文件。
##### 2.3 导出镜像
单击某一镜像版本的【导出镜像】按钮，可将该镜像文件下载到本地。镜像导出过程中有百分比进度提示，导出完成后显示100%。
![avatar](/pics/镜像导出.png)

##### 2.4 查看详情
单击镜像列表的【查看详情】，可显示该镜像组详细信息，包括镜像组名称，版本数，任务类型等。
![avatar](/pics/查看详情.png)
##### 2.5 筛选镜像
镜像列表上方有生产环境层级的筛选框：工厂、厂别、站点、产品，这四个筛选过滤框为级联关系，用户可以通过依次选择想要筛查的镜像所属的工厂、厂别、站点和产品来筛选出符合条件的镜像。
### 模型库
模型库是系统全部模型的管理中心，包括已经完成发布的模型集合与正在训练的任务集合。
#### 新建模型
在模型库列表页面单击【新建模型】，可以开始一个新训练任务的创建，训练完成之后用户可以根据训练结果选择是否将训练结束的任务发布到模型库中。模型库列表中的模型也可以通过点击【重新训练】进行再次迭代训练。新建模型的步骤如下：
##### 2.1 第一步：选择模型镜像
输入信息：

- 模型名称：最长60个字符，字母开头，支持 a-z，A-Z，0-9，-，_，且需要以数字或字母结尾
- 选择镜像：

若选择**通用类型镜像**，需要输入的信息如下：

1.模型文件。需要从页面下拉列表中选择对应的镜像文件，单击任一镜像版本，右侧会显示该通用镜像的配置信息，用户可以根据具体需求进行选择。
![avatar](/pics/选择镜像1.png)

2.模型参数。选择通用类型的镜像还需配置模型参数，在页面下方有模型参数配置富文本框，系统已经给出了相关参数的缺省值，用户可以选择默认值也可以进行自定义修改配置。
> 模型参数范例：
> 
	{
		"classification": {
        "name": "ResNet18",
        "num_of_classes": 5
    }
    "code_list": [
        "TPFIP",
        "TTFBS",
        "TTMUD",
        "TGGS0",
        "TPOTS",
        "TSFAS",
        "TSDFS"
    ]
    }
- classification层级包含了分类模型相关的参数，其中name表示具体使用的神经网络，目前仅支持一种ResNet18，num_of_classes表示分类模型预测的类别数。
- code_list层级是整个算法需要处理的缺陷名称列表，缺陷列表由分类模型预测的code和特殊缺陷code组成（如果需要处理特殊缺陷），且特殊缺陷TSFAS、TSDFS等列在分类缺陷列表最后，如上例参数代码所示。列表中的"TPFIP","TTFBS","TTMUD","TGGS0","TPOTS"5个code为分类模型预测的code类别（对应于num_of_classes=5），"TSFAS"、"TSDFS"为2个特殊缺陷，至于列表的末尾，算法会进行特殊的处理。
- 如果用户勾选训练分割模型，所有code_list中出现的缺陷名对应的图片都会进行分割模型训练。



3.生产环境信息。通用镜像本身不绑定特定的生产环境信息，因此用户需要在此步骤进行此镜像对应的模型的适用生产环境的选择。
![avatar](/pics/选择镜像2.png)

若选择**业务类镜像**，则用户仅需根据生产环境条件筛选出符合条件的镜像文件及其版本。
![avatar](/pics/选择镜像3.png)

镜像信息配置完成后，单击【下一步】，跳转至选择数据路径步骤。

##### 2.2 第二步：选择数据路径
此步骤是为当前模型选择训练数据，训练数据由多个数据路径组成，每个数据路径下包含若干数量图片。

- 添加路径入口：
数据路径选择有两个入口：

第一，选择路径所在的数据集，单击【导入路径】进行数据路径的批量导入，导入后的路径在路径列表可以查看。

第二，单击【添加数据路径】，可直接在路径列表新增路径。
![avatar](/pics/选择数据路径.png)

- 路径列表管理：路径列表维护了当前训练任务所绑定的所有训练数据集对应的路径。【状态】表示该数据路径的有效性，若某条数据路径下不存在图片，则状态判断为无效；【数量】表示了该路径下的图片数量，点击显示；【描述】为添加数据路径时自动带出的路径信息，描述了当前路径数据的适用信息。单击【删除】可以删除当前路径。
> 1. 为了保证模型训练的质量，在新建模型时请务必导入模型镜像训练时所有训练数据集的路径；
> 2. 模型重新训练的时候，不可删除新建模型时所绑定的数据路径；
> 3. 若绑定的数据路径下有任一一条状态为无效，则无法进行下一步，因此请确保绑定的数据路径下有实际训练可用的图片数据。
完成数据路径选择后，单击【下一步】，开始进行训练参数配置。
##### 2.3 第三步：配置训练参数
- 配置计算资源：计算资源配置在主数据里进行维护，用户可以根据当前模型所需的计算资源进行选择，这里提供两种计算资源配置，如下图所示：

![avatar](/pics/训练参数配置.png)
- 配置训练参数：页面下方显示训练参数配置富文本框，系统已经给出了相关参数的缺省值，用户可以选择默认值也可以进行自定义修改配置。
> 默认参数范例：
> 
    {
    "classification":{
        "base_lr": 0.001,
        "batch_size": 256,
        "max_iter": 40000,
        "weight_decay":0.0001,
        "momentum": 0.9,
        "lr_policy": "poly",
        "power": 0.9,
        "gamma": 0.1
    },
    "segmentation":{
        "base_lr": 0.01,
        "batch_size": 16,
        "max_iter": 100000,
        "weight_decay": 0.0001,
        "momentum": 0.9,
        "lr_policy": "poly",
        "power": 0.9,
        "gamma": 0.1
    } 
    }
-     classification层级包含了分类模型相关的训练参数，segmenatation层级包含了分割模型相关的训练参数。
- 训练默认使用随机梯度下降法(SGD):
- base_lr表示基础学习率，
- batch_size表示批尺寸，
- max_iter表示训练的最大迭代次数（按batch而非epoch），
- weight_decay表示正则化权重，
- momentum表示梯度下降更新时的动量。
- lr_policy目前支持的策略有fixed, exp, inv, poly。
- lr_policy, power, gamma的关系详见下述学习率下降说明：

>> fixed: 实际学习率总是 base_lr
> 
>> exp: 实际学习率是 base_lr  gamma ^ iter, iter为当前迭代次数*
> 
>> inv: 实际学习率是 base_lr  (1 + gamma * iter) ^ (- power), iter为当前迭代次数* 
> 
>> poly: 学习率进行多项式误差, 实际学习率是 base_lr  (1 - iter/max_iter) ^ (power), iter为当前迭代次数, max_iter为最大迭代次数* 
> 
- 如果用户勾未选了训练分割模型，segmentation层级下的参数将无效。

    


##### 2.4 第四步：添加预处理参数
新建模型时，系统提供三种预处理参数设置。
![avatar](/pics/预处理参数.png)

- 切分比例： 填写训练集与验证集的切分比例，如0.8表示训练集与验证集的比例为0.8。
- 归一化处理：用户可选择是否开启归一化处理，若开启归一化处理，系统在训练任务开始前对训练数据图片进行分辨率合规过滤处理，自动剔除分辨率不符合要求的图片，并归类为“不合规样本”。
- 数据增强：用户可以选择数据增强的方式，我们提供色彩增强、图像缩放、图像翻转 和随机变换四种选项供用户选择。

> 色彩增强：对图片的hsv色彩空间进行变换生成增强图片
> 
> 图像缩放：以一定比例的缩小或者放大图片生成增强图片
> 
> 图像翻转：对图片进行左右翻转生成增强图片
> 
> 随机变换：融合了缩放以及翻转并且以随机的参数进行变换生成增强图片

- 训练分割选择：如果该模型的任务类型为分割分类，在添加预处理参数界面则会有是否开启训练分割的选项。若要同时进行分割和分类训练，则需勾选【开启训练分割】。

训练任务配置完成后，用户可以到【训练任务管理】页面查看训练任务的运行状态。
#### 训练任务管理
训练任务管理模块维护了所有模型的训练任务。用户可在训练任务管理首页查看当前系统所有状态的训练任务。每一个训练任务可查看其对应的模型名称、模型版本、任务状态、创建用户、训练时长和进度条信息，对于不同状态的训练任务，用户可以进行任务的终止、启动、监控、删除等操作，训练完成后还可以查看任务评估报告。
##### 训练任务状态说明
训练任务的状态有“等待中、正在训练、训练终止、训练完成、训练失败、已发布”六种状态。

- 等待中：处于“等待中”的任务表示该训练任务正在等待资源分配或调度过程中，处于等待中的任务无法终止。
- 正在训练：处于“正在训练”中的任务表示该任务已处于训练的过程中，此时用户可以选择单击【终止】按钮手动终止训练进程，也可以单击【监控】按钮查看训练任务进程。
- 训练终止：当用户将状态为“正在训练”的任务终止后，训练任务的状态即为“训练终止”。训练终止的任务可单击【启动】再次启动训练，点击启动后，任务状态转变为正在训练或等待中，进度条从0开始延伸。
- 训练完成：当训练任务全部完成后，该任务的进度条显示为100%，且任务状态切换为“训练完成”，单击【模型评估报告】可查看该次训练的评估结果。单击【模型发布】可将该训练完成的模型添加至我的模型库中。
- 训练失败：当训练任务在运行过程中发生异常时，状态会显示为“训练失败”，单击【监控】可在监控页面点击【下载日志】查看运行日志以查看失败原由；训练失败的任务可单击【启动】按钮再次启动任务。
- 已发布：当任务训练完成后，用户可自行决定是否发布该模型。“发布模型”表示将该训练完成的模型添加至我的模型库中，并生成新的模型版本。只有训练完成的任务才可以进行模型发布，且发布成功以后不可再次发布。

![avatar](/pics/训练任务列表.png)
##### 训练任务监控
处于“正在训练”状态的任务可以查看训练进程状态。训练进程状态监控主要分为两部分：预处理环节状态监控和模型训练过程监控。

1. 预处理环节状态监控

预处理状态监控有三个环节：数据归一化处理、数据划分和数据增强。每个预处理环节均可以查看其“状态”和“运行时间”。任一环节处理结束，该环节的状态即为“完成”，归一化处理环节若出现不合规样本，监控页面亦会暴露其不合规样本数量。
![avatar](/pics/监控1.png)
2. 模型训练过程监控

模型训练过程监控主要有两个部分：整体训练时长监控和模型训练过程损失函数监控。模型训练时长监控采用进度条滚动和展示预计训练结束时间的方式，给用户训练进度的直观感受。若本次训练任务的类型为“分割分类”，监控页面会同时显示分割训练损失函数实时变化和分类训练损失函数实时变化，同时伴有两个训练模块的日志下载功能；若本次训练任务的类型为“分类”，监控页面只会显示分类训练损失函数实时变化。

损失函数实时变化图的横坐标为iteration，纵坐标为loss。损失函数的变化表示该训练模型随着迭代次数的增加，模型总体准确率的趋势。
![avatar](/pics/监控2.png)

单击【下载日志】可将训练过程日志下载到本地进行查看。

##### 训练评估报告
训练任务完成后可以查看本次训练任务的评估报告。训练任务的评估报告展示总体验证集样本的准确率、召回率和交并比IoU（带有分割过程的任务类型在模型训练评估报告中会显示交并比IoU值，分类任务不会显示）。同时，训练评估报告还会展示所有不同缺陷类别的准确率、召回率和IoU（带分割任务）。
![avatar](/pics/训练评估报告.png)
##### 模型发布
查看训练评估报告后，可以对本次训练模型的总体性能有总体了解，如果用户想要保留这个模型，并且在我的模型库中统一进行管理，可单击【模型发布】将改论文任务发布至我的模型库。用户可以对模型进行重新训练，题库预测等操作，发布后模型自动生成新的版本。
![avatar](/pics/模型发布.png)
> 关于模型版本迭代的规则
> 
模型版本号的格式为X.XX，其中整数位版本号继承模型所绑定的镜像的版本号，例如，模型A新建的时候绑定的模型镜像的版本为v3.0，则训练完成后发布的模型A的版本为v3.01。小数位的版本号由重新训练的迭代次数逐渐增加。例如，模型A，版本v3.01经过重新训练，绑定不同的数据路径，发布后生成的新的版本号为v3.02。

#### 模型管理
所有在训练任务管理页面发布成功的模型均会显示在我的模型页面，模型列表展示了模型名称、模型版本、模型类型、修改人和最近修改时间等信息。
![avatar](/pics/模型列表.png)
单击模型名称，可查看该模型的详细情况，包括模型所属的生产环境信息。
![avatar](/pics/模型详情.png)
##### 模型版本管理
模型详情页面单击【版本管理】标签，可查看该模型的历史版本，针对每个历史版本，都可以进行再次训练、题库预测以及导出。
![avatar](/pics/版本管理.png)
##### 模型评估报告
单击模型列表【操作】栏的【模型评估报告】，可查看当前版本模型最新一次题库预测的评估报告。
![avatar](/pics/模型评估报告.png)
模型评估报告展示了题库预测结果的性能指标，总体报告分为左右两个模块：

模块左上半部分展示了模型的总体预测准确率、召回率和IoU（带分割的模型），下半部分展示了题库数据各个缺陷类别的预测准确率、召回率和IoU（带分割的模型）。

模块右展示了每个缺陷类别评估结果的下钻信息，单击左侧缺陷类别栏，右侧展示该类别下的所有误判样本和不合规样本的置信度信息和预测结果信息。每个样本均可放大查看，并且同时支持单个样本的下载和批量打包下载。其中误判样本表示预测结果与真实缺陷类别不一致的样本，不合规样本表示在预测过程预处理阶段筛选出来的不符合图片样本分辨率规格的样本。
##### 重新训练
单击模型列表的【重新训练】，可对该模型发起新的训练任务，用户可以选择不同的训练数据路径，同时也可以对训练参数和预处理参数进行调整，通过迭代训练完成模型的版本升级。
##### 题库预测
单击模型列表的【题库预测】，可对该模型发起新的预测任务，用户可以选择不同的题库数据路径，同时也可以对预测参数和预处理参数进行调整，可以查看当前模型版本的题库预测结果。
##### 模型导出
单击模型列表的【导出】，可以直接导出模型文件包，该模型文件包包括以下三种文件：

- models.xbin
- libCsotArtifact.so
- config.yaml
### 在线评估
在线评估模块由题库预测与模型对比两个部分组成，题库预测功能是指通过题库数据对模型进行在线预测，从而可以评估模型的预测性能。模型对比功能是指在系统里可以同时选择两个不同版本的模型，使用同一批题库数据集进行预测，可以直观地比对两个版本模型针对相同题库的性能指标。
#### 新建预测任务
新建预测任务分为三个步骤：选择模型，选择题库路径和添加预处理参数。新建题库预测在选择模型时只能选择某一个版本的模型，新建模型对比预测在选择模型时只能同时选择两个版本的模型进行对比预测。
##### 选择模型
新建题库预测任务的第一步需要选择模型，输入信息：

- 任务名称：输入任务名称
- 选择生产环境：根据级联关系过滤所需题库预测的生产环境信息
- 选择某一版本模型：模型列表会刷新符合所过滤的生产环境条件的所有模型及所有版本，根据预测任务的类型（题库预测或模型对比）选择一个版本模型或两个版本模型进行预测。
![avatar](/pics/选择模型.png)
##### 选择题库路径
此步骤是为当前题库预测任务选择题库数据，题库数据由多个数据路径组成，每个数据路径下包含若干数量图片。

- 添加路径入口：
数据路径选择有两个入口：

第一，选择路径所在的数据集，单击【导入路径】进行数据路径的批量导入，导入后的路径在路径列表可以查看。

第二，单击【添加数据路径】，可直接在路径列表新增路径。
##### 添加预处理参数
题库预测时，系统提供一种预处理参数设置。
- 归一化处理：用户可选择是否开启归一化处理，若开启归一化处理，系统在预测任务开始前对题库数据图片进行分辨率合规过滤处理，自动剔除分辨率不符合要求的图片，并归类为“不合规样本”。

预测任务配置完成后，用户可以到【题库预测】和【模型对比】页面查看预测任务的运行状态。

#### 题库预测
题库预测任务列表展示了所有的预测任务。每一个任务均有任务名称、模型名称、模型版本、模型类型、任务状态和预测时长等信息，其中任务状态有等待中、预测中、预测完成和运行失败四种状态。单击【查看评估报告】，可以查看当前题库预测任务的评估报告，评估报告操作方式请见[模型评估报告]()。
![avatar](/pics/题库预测列表.png)
#### 模型对比
模型对比任务列表展示了所有的对比预测任务。每一个任务均有任务名称、模型名称、模型版本（显示两个对比版本）、模型类型、任务状态和预测时长等信息，其中任务状态有等待中、预测中、预测完成和运行失败四种状态。
![avatar](/pics/模型对比列表.png)
单击【查看评估报告】，可以查看当前对比预测任务的评估报告。模型对比评估报告展示了两个不同版本模型对比预测结果的性能指标，总体报告分为左右两个模块：

模块左上半部分展示了两个版本模型的总体预测准确率、召回率和IoU（带分割的模型），下半部分展示了题库数据各个缺陷类别在不同版本模型下的预测准确率、召回率和IoU（带分割的模型）。

模块右展示了每个缺陷类别评估结果的下钻信息，单击左侧缺陷类别栏，右侧展示该类别下的所有误判样本和不合规样本的置信度信息和预测结果信息。每个样本均可放大查看，并且同时支持单个样本的下载和批量打包下载。其中误判样本表示预测结果与真实缺陷类别不一致的样本，不合规样本表示在预测过程预处理阶段筛选出来的不符合图片样本分辨率规格的样本。
![avatar](/pics/模型对比.png)




